<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="pubTesterMainDAO">
	<select id="selectPopularCampaignList" resultType="PubTesterMainVO">
			/* 모집이 끝나지 않았지만, 신청자가 많은 순서 */
			SELECT
				CAMP_IDX			as campIdx,
				CAMP_TITLE 			as campTitle,
				CAMP_THUB 			as campThub,
				CAMP_AD_TYPE		as campAdType,
				CAMP_TYPE			as campType,
				CAMP_SERVICE		as campService,
				CAMP_STARTDATE		as campStartDate,
				CAMP_REC_ENDDATE	as campRecEndDate,
				(SELECT COUNT(*)
		           FROM PUB_CAMP_SUM
		          WHERE CAMP_IDX = PUB_CAMP.CAMP_IDX
		           		AND SUM_STATE = '신청')		as campSumCount,
				CAMP_RECRUITE		as campRecruite
			FROM 
				PUB_CAMP
			WHERE
				CAMP_DELYN = 'N'
				AND CAMP_REC_ENDDATE >= NOW()
			ORDER BY
				CAMP_SUM_COUNT DESC
			LIMIT 10
	</select>
	
	<select id="selectNewCampaignList" resultType="PubTesterMainVO">
			/* 새롭게 등록된 체험단 부터 */
			SELECT 
				CAMP_IDX		as campIdx,
				CAMP_TITLE 		as campTitle,
				CAMP_THUB 		as campTumb,
				CAMP_AD_TYPE	as campAdType,
				CAMP_TYPE		as campType,
				CAMP_SERVICE	as campService,
				CAMP_STARTDATE	as campStartDate,
				CAMP_REC_ENDDATE	as campRecEndDate,
				(SELECT COUNT(*)
		           FROM PUB_CAMP_SUM
		          WHERE CAMP_IDX = PUB_CAMP.CAMP_IDX
		           		AND SUM_STATE = '신청')		as campSumCount,
				CAMP_RECRUITE	as campRecruite
			FROM 
				PUB_CAMP
			WHERE
				CAMP_DELYN = 'N'
				AND CAMP_REC_ENDDATE >= NOW()
			ORDER BY
				CAMP_REGDATE DESC
			LIMIT 12
	</select>
	
	<select id="selectDeadlineCampaignList" resultType="PubTesterMainVO">
			/* 체험단 모집이 얼마 남지 않은 체험단들 부터*/
			SELECT 
				CAMP_IDX			as campIdx,
				CAMP_TITLE 			as campTitle,
				CAMP_THUB 			as campTumb,
				CAMP_AD_TYPE		as campAdType,
				CAMP_TYPE			as campType,
				CAMP_SERVICE		as campService,
				CAMP_STARTDATE		as campStartDate,
				CAMP_REC_ENDDATE	as campRecEndDate,
				(SELECT COUNT(*)
		           FROM PUB_CAMP_SUM
		          WHERE CAMP_IDX = PUB_CAMP.CAMP_IDX
		           		AND SUM_STATE = '신청')		as campSumCount,
				CAMP_RECRUITE		as campRecruite
			FROM 
				PUB_CAMP
			WHERE
				CAMP_DELYN = 'N'
				AND CAMP_REC_ENDDATE >= NOW()
			ORDER BY
    			CAMP_REC_ENDDATE ASC
			LIMIT 12
	</select>
	
</mapper>